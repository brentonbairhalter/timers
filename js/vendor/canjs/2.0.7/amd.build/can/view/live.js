/*!
 * CanJS - 2.0.7
 * http://canjs.us/
 * Copyright (c) 2014 Bitovi
 * Wed, 26 Mar 2014 16:12:27 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */

define(["can/util/library","can/view/elements","can/view","can/view/node_lists"],function(e,t,n,r){var i=function(t,n,r){var i=!1,s=function(){return i||(i=!0,r(o),e.unbind.call(t,"removed",s)),!0},o={teardownCheck:function(e){return e?!1:s()}};return e.bind.call(t,"removed",s),n(o),o},s=function(e,t,n){return i(e,function(){t.bind("change",n)},function(e){t.unbind("change",n),e.nodeList&&r.unregister(e.nodeList)})},o=function(e){return(e||"").replace(/['"]/g,"").split("=")},u=[].splice,a={list:function(n,s,o,f,l){var c=[n],h=[],p=[],d=function(n,i,s){var a=document.createDocumentFragment(),l=[],d=[];e.each(i,function(t,n){var i=e.compute(n+s),u=o.call(f,t,i),h=e.view.fragment(u);l.push(r.register(e.makeArray(h.childNodes),undefined,c)),a.appendChild(e.view.hookup(h)),d.push(i)});if(!h[s])t.after(s===0?[m]:h[s-1],a);else{var v=h[s][0];e.insertBefore(v.parentNode,a,v)}u.apply(h,[s,0].concat(l)),u.apply(p,[s,0].concat(d));for(var g=s+d.length,y=p.length;g<y;g++)p[g](g)},v=function(t,n,i,s){if(!s&&w.teardownCheck(m.parentNode))return;var o=h.splice(i,n.length),u=[];e.each(o,function(e){[].push.apply(u,e),r.update(e,[]),r.unregister(e)}),p.splice(i,n.length);for(var a=i,f=p.length;a<f;a++)p[a](a);e.remove(e.$(u))},m=document.createTextNode(""),g,y=function(){g&&g.unbind&&g.unbind("add",d).unbind("remove",v),v({},{length:h.length},0,!0)},b=function(e,t,n){y(),g=t||[],g.bind&&g.bind("add",d).bind("remove",v),d({},g,0)};l=t.getParentNode(n,l);var w=i(l,function(){e.isFunction(s)&&s.bind("change",b)},function(){e.isFunction(s)&&s.unbind("change",b),y()});a.replace(c,m,w.teardownCheck),b({},e.isFunction(s)?s():s)},html:function(n,i,o){var u;o=t.getParentNode(n,o),u=s(o,i,function(e,t,n){var r=a[0].parentNode;r&&f(t),u.teardownCheck(a[0].parentNode)});var a=[n],f=function(n){var i=e.view.fragment(""+n),s=e.makeArray(a);r.update(a,i.childNodes),i=e.view.hookup(i,o),t.replace(s,i)};u.nodeList=a,r.register(a,u.teardownCheck),f(i())},replace:function(n,i,s){var o=n.slice(0),u;return r.register(n,s),typeof i=="string"?u=e.view.fragment(i):i.nodeType!==11?(u=document.createDocumentFragment(),u.appendChild(i)):u=i,r.update(n,u.childNodes),typeof i=="string"&&(u=e.view.hookup(u,n[0].parentNode)),t.replace(o,u),n},text:function(e,n,r){var i=t.getParentNode(e,r),o=s(i,n,function(e,t,n){typeof u.nodeValue!="unknown"&&(u.nodeValue=""+t),o.teardownCheck(u.parentNode)}),u=document.createTextNode(n());o.nodeList=a.replace([e],u,o.teardownCheck)},attributes:function(e,n,r){var i=function(n){var r=o(n),i=r.shift();i!==u&&u&&t.removeAttr(e,u),i&&(t.setAttr(e,i,r.join("=")),u=i)};s(e,n,function(e,t){i(t)});if(arguments.length>=3)var u=o(r)[0];else i(n())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(n,r,i){s(n,i,function(e,i){t.setAttr(n,r,h.render())});var o=e.$(n),u;u=e.data(o,"hooks"),u||e.data(o,"hooks",u={});var f=t.getAttr(n,r),l=f.split(a.attributePlaceholder),c=[],h;c.push(l.shift(),l.join(a.attributePlaceholder)),u[r]?u[r].computes.push(i):u[r]={render:function(){var e=0,n=f?f.replace(a.attributeReplace,function(){return t.contentText(h.computes[e++]())}):t.contentText(h.computes[e++]());return n},computes:[i],batchNum:undefined},h=u[r],c.splice(1,0,i()),t.setAttr(n,r,c.join(""))},specialAttribute:function(e,n,r){s(e,r,function(r,i){t.setAttr(e,n,l(i))}),t.setAttr(e,n,l(r()))}},f=/(\r|\n)+/g,l=function(e){var n=/^["'].*["']$/;return e=e.replace(t.attrReg,"").replace(f,""),n.test(e)?e.substr(1,e.length-2):e};return e.view.live=a,e.view.nodeLists=r,e.view.elements=t,a});